(function(l,I){typeof exports=="object"&&typeof module<"u"?I(exports):typeof define=="function"&&define.amd?define(["exports"],I):(l=typeof globalThis<"u"?globalThis:l||self,I(l["parsnip-kit"]={}))})(this,function(l){"use strict";const I=new RegExp("[-_\\s]|(?<=[a-z])(?=[A-Z])|(?<=[A-Z])(?=[A-Z][a-z])|(\\d+)");function b(n){return n.split(I).filter(Boolean)}function fn(n){const e=b(n);let t="";const i=e.length;for(let o=0;o<i;o++)t+=o>0?e[o].charAt(0).toUpperCase()+e[o].slice(1).toLowerCase():e[o].toLowerCase();return t}function an(n){const e=b(n);let t="";const i=e.length;for(let o=0;o<i;o++)t+=e[o].toLowerCase()+(o<i-1?"-":"");return t}function yn(n){const e=b(n);let t="";const i=e.length;for(let o=0;o<i;o++)t+=e[o].charAt(0).toUpperCase()+e[o].slice(1).toLowerCase();return t}function hn(n){const e=b(n);let t="";const i=e.length;for(let o=0;o<i;o++)t+=e[o].toLowerCase()+(o<i-1?"_":"");return t}const mn=/\.|\[(\d+)\]/;function T(n){return n.split(mn).filter(Boolean)}function dn(n){const e=b(n);let t="";const i=e.length;for(let o=0;o<i;o++)t+=e[o].toUpperCase()+(o<i-1?"_":"");return t}function W(n){return n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()}function pn(n){const e=b(n);let t="";const i=e.length;for(let o=0;o<i;o++)t+=W(e[o])+(o<i-1?" ":"");return t}const vn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function wn(n){let e="";for(let t=0;t<n.length;t++){const i=n[t];e+=vn[i]||i}return e}const kn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#34;":'"',"&#39;":"'"};function bn(n){return n.replace(/&lt;|&gt;|&amp;|&quot;|&#39;|&#34;/g,e=>kn[e])}function F(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function a(n,e,t){const i=T(e),o=i.length;let s=n;for(let c=0;c<o;c++)if(v(s))s=s[i[c]];else return t;return t??s}function p(n){return typeof n=="function"}function An(n,e,t={}){const{start:i="{",end:o="}"}=t,s=new RegExp(`${F(i)}(.*?)${F(o)}`,"g");return n.replace(s,(c,u)=>{const f=p(e)?e(u):a(e,u);return f??c})}function h(n){return typeof n=="string"||n instanceof String}function Tn(n){return typeof n=="boolean"||n instanceof Boolean}function On(n){return n===null}function k(n){return typeof n=="number"||n instanceof Number}function K(n){return n===void 0}function In(n){return typeof n=="symbol"}function Mn(n){return typeof n=="bigint"}function U(n){return!v(n)}function w(n){return h(n)&&/^\d+$/.test(n)}function C(n){return Array.isArray(n)}function V(n){return n!==null&&typeof n=="object"}function Sn(n){return p(n)&&v(n.prototype)&&p(n.prototype.constructor)}function En(n){return v(n)&&"length"in n&&typeof n.length=="number"}function $(n){return k(n)&&(typeof n=="number"?n===1/0||n===-1/0:n.valueOf()===1/0||n.valueOf()===-1/0)}function D(n){return k(n)&&(typeof n=="number"?Number.isNaN(n):Number.isNaN(n.valueOf()))}function Bn(n){return k(n)&&!$(n)&&!D(n)&&(typeof n=="number"?n===Math.floor(n):n.valueOf()===Math.floor(n))}function Cn(n){return k(n)&&!$(n)&&!D(n)&&(typeof n=="number"?n!==Math.floor(n):n.valueOf()!==Math.floor(n))}const M=n=>Object.prototype.toString.apply(n).slice(8,-1);function N(n){return n==null}function Z(n,e,t){const i=T(e),o=i.length;let s=n;for(let c=0;c<o;c++){let u;if(w(i[c])&&(u=parseInt(i[c])),c===o-1)s[u===void 0?i[c]:u]=t;else{const f=w(i[c+1]),r=u===void 0?i[c]:u;v(s[r])||(s[r]=f?[]:{}),s=s[r]}}}function Nn(n,e){const t=T(e),i=t.length;let o=n;for(let s=0;s<i;s++)if(v(o))s<i-1?o=o[t[s]]:w(t[s])&&Array.isArray(o)?o.splice(parseInt(t[s]),1):delete o[t[s]];else throw TypeError(`${t.slice(0,s+1).reduce((c,u,f)=>c+(w(u)?`[${u}]`:f===0?`${u}`:`.${u}`),"")} is not an object.`)}function Pn(n){if(V(n)){let e={};const t=M(n);if(n instanceof Map){e=new Map;for(const i of n.entries())e.set(i[0],i[1])}else if(n instanceof Set){e=new Set;for(const i of n.values())e.add(i)}else if(Array.isArray(n)||t==="Arguments"){e=new Array(n.length);const i=Object.keys(n);for(const o of i)e[o]=n[o]}else if(e=H(n,t),!e)if(t==="Object"){n.__proto__?(e=Object.create(n.__proto__),Object.defineProperty(e,"constructor",{value:n.constructor,writable:!0,enumerable:!1,configurable:!0})):e={};const i=Object.keys(n);for(const o of i)e[o]=n[o]}else e={};return e}else return n}const H=(n,e,t)=>{if(t&&t.has(n))return t.get(n);let i;switch(e){case"Number":i=new Number(n.valueOf());break;case"String":i=new String(n.valueOf());break;case"Boolean":i=new Boolean(n.valueOf());break;case"Date":i=new Date(n.valueOf());break;case"RegExp":i=new RegExp(n.source,n.flags);break;case"Blob":i=new Blob([n],{type:n.type});break;case"File":i=new File([n],n.name,{type:n.type});break;case"ArrayBuffer":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":i=n.slice();break}return t&&i&&t.set(n,i),i};function jn(n,e){return J(n,new WeakMap,void 0,e)}function S(n,e,t,i){let o=n;if(v(n))if(e.has(n))o=e.get(n);else{const s=J(n,e,t,i);s&&(o=s,e.set(n,s))}return o}function J(n,e,t,i){if(v(n)){let o={};const s=M(n);if(n instanceof Map){o=new Map;for(const c of n.entries())o.set(S(c[0],e,void 0,i),S(c[1],e,void 0,i))}else if(n instanceof Set){o=new Set;for(const c of n.values())o.add(S(c,e,void 0,i))}else if(Array.isArray(n)||s==="Arguments"){o=new Array(n.length);const c=Object.keys(n);for(const u of c)o[u]=S(n[u],e,u,i)}else o=H(n,s,e),o||(p(i)?o=i(n,t,e,G):s==="Object"?o=G(n,e,i):o=n);return o}else return n}function G(n,e,t){if(e.has(n))return e.get(n);let i;n.__proto__?(i=Object.create(n.__proto__),Object.defineProperty(i,"constructor",{value:n.constructor,writable:!0,enumerable:!1,configurable:!0})):i={},e.set(n,i);const o=Object.keys(n);for(const s of o)i[s]=S(n[s],e,s,t);return i}function Fn(n,e){const t=e.map(s=>T(s)[0]).map(s=>w(s)?parseInt(s):s),i=Array.isArray(n)?[]:{},o=Object.keys(n);for(const s of o)i[s]=n[s];return t.sort((s,c)=>{const u=k(s),f=k(c);return u&&f?c-s:u||f?u?-1:1:s.localeCompare(c)}),t.forEach(s=>{Array.isArray(i)&&k(s)?i.splice(s,1):delete i[s]}),i}function Un(n,e){const t=e.map(o=>T(o)[0]),i=Array.isArray(n)?[]:{};return t.forEach(o=>{Object.prototype.hasOwnProperty.call(n,o)&&(Array.isArray(i)?i.push(n[o]):i[o]=n[o])}),i}function $n(n,e){const t=Array.isArray(n)?[]:{},i=Object.keys(n);for(const s of i)t[s]=n[s];let o=0;for(const s of i)e(n[s],s,n)||(Array.isArray(t)&&w(s)?(t.splice(parseInt(s)-o,1),o++):delete t[s]);return t}function Dn(n,e){const t=Object.keys(n);for(const i of t)e(n[i],i,n)}function O(n,e){return Object.is(n,e)}function E(n,e){return qn(n,e)}function qn(n,e){if(U(n)||U(e))return O(n,e);if(O(n,e))return!0;const t=M(n),i=M(e);if(t!==i)return!1;if(Array.isArray(n))return Y(n,e);switch(t){case"Number":case"Boolean":case"Date":return O(n.valueOf(),e.valueOf());case"String":case"RegExp":return n.toString()===e.toString();case"ArrayBuffer":return Rn(n,e);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return Q(n,e);case"Object":return Y(n,e);case"Set":return Ln(n,e);case"Map":return _n(n,e);default:return O(n,e)}}function _n(n,e){if(n.size!==e.size)return!1;const t=[...n.keys()],i=[...e.keys()],o=n.size;for(let s=0;s<o;s++)if(!E(t[s],i[s])||!E(n.get(t[s]),e.get(i[s])))return!1;return!0}function Ln(n,e){if(n.size!==e.size)return!1;const t=[...n.values()],i=[...e.values()],o=n.size;for(let s=0;s<o;s++)if(!E(t[s],i[s]))return!1;return!0}function Y(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;const o=t.length;for(let s=0;s<o;s++)if(!Object.prototype.hasOwnProperty.call(e,t[s])||!E(n[t[s]],e[t[s]]))return!1;return!0}function Rn(n,e){if(n.byteLength!==e.byteLength)return!1;const t=new Uint8Array(n),i=new Uint8Array(e);return Q(t,i)}function Q(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!O(n[t],e[t]))return!1;return!0}function zn(n,e,t){const i=[],o=[],s=Object.keys(n);for(const c of s)i.push(e?e(n[c],c,n):c),o.push(t?t(n[c],c,n):n[c]);return[i,o]}function Wn(n,e){const t=[],i=Object.keys(n);for(const o of i)t.push(e?e(n[o],o,n):[o,n[o]]);return t}function Kn(n,e){const t=[],i=Object.keys(n);for(const o of i)t.push(e?e(n[o],o,n):{[o]:n[o]});return t}function Vn(...n){return n.reduce((e,t)=>{if(N(t))return e;const i=Object.keys(t);for(const o of i){const s=e[o],c=t[o];(N(s)||!N(c))&&(e[o]=c)}return e},{})}function Zn(n){const e={};return X(n,e),e}function X(n,e,t=""){const i=Object.keys(n);for(const o of i){const s=n[o],c=t?C(n)&&w(o)?`${t}[${o}]`:`${t}.${o}`:C(n)&&w(o)?`[${o}]`:o;v(s)?X(s,e,c):e[c]=s}}function Hn(n,e,t){const i=new Map,o=n.length;for(let u=0;u<o;u++){const f=t!==void 0?h(t)?a(n[u],t):t(n[u],u,n):n[u];i.has(f)||i.set(f,{value:n[u],count:1})}const s=e.length;for(let u=0;u<s;u++){const f=t!==void 0?h(t)?a(e[u],t):t(e[u],u,e):e[u],r=i.get(f);r&&r.count++}const c=[];for(const u of i.values())u.count===1&&c.push(u.value);return c}function Jn(n,e,t){const i=new Map,o=n.length;for(let u=0;u<o;u++){const f=t!==void 0?h(t)?a(n[u],t):t(n[u],u,n):n[u],r=i.get(f);r?r.count+=1:i.set(f,{value:n[u],count:1})}const s=e.length;for(let u=0;u<s;u++){const f=t!==void 0?h(t)?a(e[u],t):t(e[u],u,e):e[u],r=i.get(f);r?r.count+=1:i.set(f,{value:e[u],count:1})}const c=[];for(const u of i.values())u.count>1&&c.push(u.value);return c}function Gn(n,e,t){const i=new Map,o=n.length;for(let c=0;c<o;c++){const u=t!==void 0?h(t)?a(n[c],t):t(n[c],c,n):n[c];i.has(u)||i.set(u,n[c])}const s=e.length;for(let c=0;c<s;c++){const u=t!==void 0?h(t)?a(e[c],t):t(e[c],c,e):e[c];i.has(u)||i.set(u,e[c])}return[...i.values()]}function Yn(n,e,t){const i=new Map,o=n.length;for(let u=0;u<o;u++){const f=t!==void 0?h(t)?a(n[u],t):t(n[u],u,n):n[u];i.get(f)||i.set(f,{value:n[u],mask:1})}const s=e.length;for(let u=0;u<s;u++){const f=t!==void 0?h(t)?a(e[u],t):t(e[u],u,e):e[u],r=i.get(f);r?r.mask|=2:i.set(f,{value:e[u],mask:2})}const c=[];for(const u of i.values())u.mask!=3&&c.push(u.value);return c}function Qn(n,e){const t=new Map,i=n.length;for(let s=0;s<i;s++){const c=e!==void 0?h(e)?a(n[s],e):e(n[s],s,n):n[s];t.get(c)||t.set(c,n[s])}const o=[];for(const s of t.values())o.push(s);return o}function Xn(n,e,t,i,o){const s=new Map,c=e.length;for(let r=0;r<c;r++)s.set(h(i)?a(e[r],i):i(e[r],r,e),e[r]);const u=[],f=n.length;for(let r=0;r<f;r++){const y=h(t)?a(n[r],t):t(n[r],r,n),m=s.get(y);u.push(o(n[r],m))}return u}const x=(n,e)=>n.localeCompare(e),g=(n,e)=>e.localeCompare(n),q=(n,e)=>n-e,nn=(n,e)=>e-n,en=(n,e)=>n<e?-1:e>n?1:0,xn=(n,e)=>n<e?1:e>n?-1:0;function tn(n,e){const t=n.map((i,o)=>o);return t.sort((i,o)=>e?e(n[i],n[o]):en(`${n[i]}`,`${n[o]}`)),t}function gn(n,e,t){const i={},o=n.length;for(let s=0;s<o;s++){const c=Object.keys(n[s])[0],u=e?h(e)?a(n[s],e):e(n[s],s,n):c,f=t?h(t)?a(n[s],t):t(n[s],s,n):n[s][c];i[u]=f}return i}function ne(n,e,t){const i={},o=n.length;for(let s=0;s<o;s++){const c=e?h(e)?a(n[s],e):e(n[s],s,n):n[s][0],u=t?h(t)?a(n[s],t):t(n[s],s,n):n[s][1];i[c]=u}return i}function ee(n,e,t,i){const o={},s=n.length;for(let c=0;c<s;c++){const u=t?h(t)?a(n[c],t):t(n[c],c,n):n[c],f=i?h(i)?a(e[c],i):i(e[c],c,e):e[c];o[u]=f}return o}function te(n,e){const t=tn(n,e),i=t.map(s=>n[s]),o=n.length;for(let s=0;s<o;s++)n[s]=i[s];return t}function oe(n,e="asc",t){return n.sort((i,o)=>{const s=t?p(t)?t(i):a(i,t):i,c=t?p(t)?t(o):a(o,t):o;return e==="asc"?x(s,c):g(s,c)})}function ie(n,e,t,i="children"){const o=new Map,s=n.length,c=new Array(s).fill(0),u=new Map;for(let r=0;r<s;r++){const y=e?p(e)?e(n[r],r,n):a(n[r],e):n[r].key;o.set(y,n[r]);let m=a(n[r],i);C(m)||(m=[],Z(n[r],i,m)),u.set(n[r],m)}for(let r=0;r<s;r++){const y=t?p(t)?t(n[r],r,n):a(n[r],t):n[r].parent,m=o.get(y);if(m){const d=u.get(m);d&&(d.push(n[r]),c[r]++)}}const f=[];for(let r=0;r<s;r++)c[r]===0&&f.push(n[r]);return f}function se(n,e){if(e<1)throw TypeError("Length of chunk cannot be less than 1.");const t=Math.floor(e),i=n.length,o=[];for(let s=0;s<i;s++){const c=Math.floor(s/t);o[c]===void 0&&(o[c]=[]),o[c].push(n[s])}return o}function ce(n,e="asc",t){return n.sort((i,o)=>{const s=t?p(t)?t(i):a(i,t):i,c=t?p(t)?t(o):a(o,t):o;return e==="asc"?q(s,c):nn(s,c)})}function ue(n,e,t){const i=new Map;e.forEach((c,u)=>{i.set(c,u)});const o=new Map;return n.forEach((c,u)=>{o.set(c,u)}),n.sort((c,u)=>{const f=t!==void 0?h(t)?a(c,t):t(c):c,r=t!==void 0?h(t)?a(u,t):t(u):u,y=i.get(f),m=i.get(r);return y!==void 0&&m!==void 0?y-m:y!==void 0?-1:m!==void 0?1:o.get(c)-o.get(u)})}function le(n,e,t=1){if(n===e)return[];if(t===0)throw TypeError("range step must be not equal 0.");const i=[];for(;t>0?n<e:e<n;)i.push(n),n+=t;return i}function re(n,e=100,t=2){if(e===0)throw new TypeError("Total cannot be zero.");return`${(n/e*100).toFixed(t)}%`}function fe(n){const e=Math.abs(n).toString(),[t,i]=e.split("."),o=t.replace(/\B(?=(\d{3})+(?!\d))/g,",");let s;if(i){const c=i.replace(/(\d{3})(?=\d)/g,"$1,");s=`${o}.${c}`}else s=o;return n<0?"-"+s:s}const _=["bit","B","KB","MB","GB","TB","PB","EB","ZB","YB"];function ae(n,e,t,i="binary"){let o=-1,s=-1;const c=_.length;for(let m=0;m<c&&(e===_[m]&&(o=m),t===_[m]&&(s=m),!(o>-1&&s>-1));m++);if(o===-1)throw TypeError("Unknown unit of from.");if(s===-1)throw TypeError("Unknown unit of to.");const u=i==="decimal"?1e3:1024,f=o===0&&s>0,r=s===0&&o>0,y=o-s+(f?1:0)-(r?1:0);return n*Math.pow(u,y)/(f?8:1)*(r?8:1)}function on(n,e){let t=0;const i=n.length;for(let o=0;o<i;o++)t+=e!==void 0?h(e)?a(n[o],e):e(n[o],o,n):n[o];return t}function ye(n,e){if(n.length===0)throw TypeError("Length of data to calculate average must > 0");return on(n,e)/n.length}function sn(n,e){const t=new Map,i=n.length;for(let o=0;o<i;o++){const s=e!==void 0?h(e)?a(n[o],e):e(n[o],o,n):n[o];t.set(s,(t.get(s)??0)+1)}return t}function he(n,e){const t=n.map((o,s)=>e!==void 0?h(e)?a(o,e):e(o,s,n):o);t.sort(q);const i=Math.floor(t.length/2);return t.length&1?t[i]:(t[i]+t[i-1])/2}function me(n,e){const t=sn(n,e),i=Math.max(...t.values());let o;for(const s of t.entries())s[1]===i&&(o=s[0]);return o}function de(n,e){let t=-1/0;const i=n.length;for(let o=0;o<i;o++){const s=e!==void 0?h(e)?a(n[o],e):e(n[o],o,n):n[o];s>t&&(t=s)}return t}function pe(n,e){let t=-1/0,i=n[0];const o=n.length;for(let s=0;s<o;s++){const c=e!==void 0?h(e)?a(n[s],e):e(n[s],s,n):n[s];c>t&&(t=c,i=n[s])}return i}function ve(n,e){let t=1/0;const i=n.length;for(let o=0;o<i;o++){const s=e!==void 0?h(e)?a(n[o],e):e(n[o],o,n):n[o];s<t&&(t=s)}return t}function we(n,e){let t=1/0,i=n[0];const o=n.length;for(let s=0;s<o;s++){const c=e!==void 0?h(e)?a(n[s],e):e(n[s],s,n):n[s];c<t&&(t=c,i=n[s])}return i}function ke(n,e){const t=new Map;let i=-1/0,o=0;const s=n.length;for(let c=0;c<s;c++){const u=e!==void 0?h(e)?a(n[c],e):e(n[c],c,n):n[c];let f=t.get(u);f||(f={count:0,firstIndex:c},t.set(u,f)),f.count++,f.count>i&&(i=f.count,o=f.firstIndex)}return n[o]}function be(){return Math.random()<.5}function L(n=0,e=1){return n+Math.random()*(e-n)}function Ae(n){const e=Math.floor(L(0,n.length));return n[e]}const Te="abcdefghijklmnopqrstuvwxyz",Oe="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Ie="0123456789",Me="!@#$%^&*()_+-=[]{}|;:,.<>?";function Se(n,e={}){if(n===0)return"";let t="";const{lowercase:i=!0,uppercase:o=!0,number:s=!0,symbol:c=!1,customized:u}=e;if(i&&(t+=Te),o&&(t+=Oe),s&&(t+=Ie),c&&(t+=Me),u&&(t+=u),t.length===0)return"";const f=t.length;let r="";for(let y=0;y<n;y++)r+=t.charAt(Math.floor(L(0,f)));return r}function Ee(n=0,e=10){return n+Math.floor(Math.random()*(e-n))}function Be(n,e="right"){return function(...i){let o,s;return e==="left"?(o=n[0](...i),s=n.slice(1)):(o=n[n.length-1](...i),s=n.slice(0,n.length-1)),e==="left"?s.reduce((c,u)=>u(c),o):s.reduceRight((c,u)=>u(c),o)}}function Ce(n){const e=n.length;return function t(...i){return i.length>=e?n.apply(this,i):function(...o){return t.apply(this,i.concat(o))}}}function Ne(n,e,t){let i,o;const{immediate:s=!1,maxWait:c}=t||{};return function(...f){c!==void 0&&!o&&(o=setTimeout(()=>{o=void 0,n.apply(this,f)},c)),!i&&s&&n.apply(this,f),i&&clearTimeout(i),i=setTimeout(()=>{o&&(clearTimeout(o),o=void 0),n.apply(this,f)},e)}}function Pe(n,e){return function(...t){setTimeout(()=>{n.apply(this,t)},e)}}const je=(...n)=>JSON.stringify(n);function Fe(n,e,t){const i=new Map,o=function(...s){const c=e?e(...s):je(...s);if(i.has(c))return i.get(c);const u=n.apply(this,s);return i.set(c,u),u};return t&&o(...t),o}function Ue(n,e,t){let i=0,o;const{leading:s=!1,trailing:c=!0}=t||{};return function(...f){const r=+new Date;s===!1&&(i=r);const y=e-(r-i);y<=0&&(o&&(clearTimeout(o),o=void 0),i=r,n.apply(this,f)),!o&&c&&(o=setTimeout(()=>{o=void 0,i=s?+new Date:0,n.apply(this,f)},y))}}function $e(n){let e=!1,t;return function(...i){return e||(e=!0,t=n.apply(this,i)),t}}function De(n,e){return function(...t){return n.apply(this,t)??e}}async function qe(n){try{return[await n(),null]}catch(e){return[null,e]}}async function _e(n,e,t="concurrent"){let i=n.length;if(!i)return;let o;const s=new Promise(c=>{o=c});for(const[c,u]of n.entries())t==="sequential"?await e(u,c,n):Promise.resolve(e(u,c,n)).finally(()=>{i--,i||o()});t==="concurrent"&&await s}async function Le(n,e,t="concurrent"){const i=Object.keys(n);let o=i.length;if(!o)return;let s;const c=new Promise(u=>{s=u});for(const u of i)t==="sequential"?await e(n[u],u,n):Promise.resolve(e(n[u],u,n)).finally(()=>{o--,o||s()});t==="concurrent"&&await c}async function Re(n,e,t="concurrent"){let i=n.length;if(!i)return[];let o;const s=new Promise(u=>{o=u}),c=[];for(const[u,f]of n.entries())t==="sequential"?c[u]=await e(f,u,n):Promise.resolve(await e(f,u,n)).then(r=>{c[u]=r}).finally(()=>{i--,i||o()});return t==="concurrent"&&await s,c}async function ze(n,e){const t=[],i=[];for(const o of n){const s=Promise.resolve().then(()=>o());if(t.push(s),e<=t.length){const c=s.finally(()=>{i.splice(i.indexOf(c),1)});i.push(c),i.length>=e&&await Promise.race(i)}}return Promise.allSettled(t)}async function We(n,e){const t=[],i=K(e)?void 0:{status:"fulfilled",value:e};for(const[o,s]of n.entries())t[o]=await Promise.resolve().then(()=>Promise.resolve(s(o>0?t[o-1]:i))).then(c=>({status:"fulfilled",value:c})).catch(c=>({status:"rejected",reason:c}));return t}const Ke=typeof process<"u"&&process.env.NODE_ENV!=="production",cn="Parsnip-Kit";function un(...n){Ke&&console.warn(`[${cn}]`,...n)}function ln(n){return new Error(`[${cn}] ${n}`)}function Ve(n,e=3,t){const{delay:i=300,delayFactor:o=2,shouldRetry:s=(r,y)=>!0,onSuccess:c=()=>{},onFailure:u=()=>{}}=t||{};async function f(...r){let y=0;const m=async()=>{try{const d=await n.apply(this,r);return c(d,y+1),{value:d,status:"fulfilled"}}catch(d){if(y+=1,y>e)return u(d,y),{reason:[d,ln("Max retries exceeded")],status:"rejected"};if(s(d,y)){u(d,y);const B=i*Math.pow(o,y);return await new Promise(A=>setTimeout(A,B)),m()}else return u(d,y),{reason:[d,ln("Retry canceled by options.shouldRetry")],status:"rejected"}}};return m()}return function(...r){return f.apply(this,r)}}function Ze(n,e,t){const{maxRetries:i=3,maxCalls:o=1/0,sequential:s=!1,leading:c=!0,onSuccess:u=()=>{},onFailure:f=()=>{}}=t||{};function r(...y){let m,d=0,B=0,A=!1;const P=async()=>{B++;try{const j=await n.apply(this,y);u(j,d+1),d=0}catch(j){d++,f(j,d),d>i&&(z(),un(`Max retries exceeded: ${i}. Last error:`,j))}B>=o&&(z(),un(`Max calls exceeded: ${o}. Stopping polling.`))},R=async()=>{m=setTimeout(async()=>{A||(s?(await P(),R()):(R(),P()))},e)},rn=async()=>{c&&(s?await P():P()),R()},z=()=>{A=!0,m&&(clearTimeout(m),m=void 0)};return rn(),{stop:z,isRunning:()=>!A,start:()=>{A&&(d=0,B=0,A=!1,rn())}}}return function(...y){return r.apply(this,y)}}l.asyncForEach=_e,l.asyncForEachFields=Le,l.asyncMap=Re,l.average=ye,l.camelCase=fn,l.capitalize=W,l.chunk=se,l.clone=Pn,l.cloneDeep=jn,l.codeUnitComparatorAsc=en,l.codeUnitComparatorDesc=xn,l.combine=Be,l.concurrent=ze,l.convertDataUnit=ae,l.count=sn,l.curry=Ce,l.debounce=Ne,l.delay=Pe,l.deleteByPath=Nn,l.difference=Hn,l.escapeRegExp=F,l.filterFields=$n,l.flattenObject=Zn,l.forEachFields=Dn,l.getByPath=a,l.getTypeTag=M,l.go=qe,l.htmlDecode=bn,l.htmlEncode=wn,l.intersection=Jn,l.isArray=C,l.isBigInt=Mn,l.isBoolean=Tn,l.isClass=Sn,l.isEqual=E,l.isEqualStrict=O,l.isFloat=Cn,l.isFunction=p,l.isInfinity=$,l.isInt=Bn,l.isNanValue=D,l.isNull=On,l.isNullish=N,l.isNumber=k,l.isNumberString=w,l.isObject=v,l.isObjectLike=V,l.isPrimitive=U,l.isPseudoArray=En,l.isString=h,l.isSymbol=In,l.isUndefined=K,l.joinToObject=gn,l.kebabCase=an,l.leftJoin=Xn,l.lexSort=oe,l.linkToTree=ie,l.max=de,l.maxItem=pe,l.median=he,l.memoize=Fe,l.mergeSkipNullish=Vn,l.min=ve,l.minItem=we,l.mode=me,l.modeItem=ke,l.numberComparatorAsc=q,l.numberComparatorDesc=nn,l.numberSort=ce,l.objectToPairs=Wn,l.omit=Fn,l.once=$e,l.orderSort=ue,l.pairsToObject=ne,l.parseTemplate=An,l.pascalCase=yn,l.percent=re,l.pick=Un,l.poll=Ze,l.randomBoolean=be,l.randomFromArray=Ae,l.randomInt=Ee,l.randomNumber=L,l.randomString=Se,l.range=le,l.retry=Ve,l.sequential=We,l.setByPath=Z,l.snakeCase=hn,l.sortIndex=tn,l.sortWithIndex=te,l.splitToArrays=Kn,l.splitToKeys=T,l.splitToWords=b,l.stringComparatorAsc=x,l.stringComparatorDesc=g,l.sum=on,l.symmetricDifference=Yn,l.thousandSeparator=fe,l.throttle=Ue,l.titleCase=pn,l.union=Gn,l.unique=Qn,l.unzipToArrays=zn,l.upperSnakeCase=dn,l.withFallback=De,l.zipToObject=ee,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});
