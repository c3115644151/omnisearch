import { p } from "../../aside/index.js";
import { p as parseColor, a as generatePalette, r as rgbaColor2string } from "./color.js";
import { t as throwError } from "./console.js";
import { i as inBrowser } from "./env.js";
import { E as EventBus } from "./event-bus.js";
import { a as GLOBAL_CSS_VAR_CHANGE } from "../const/event-bus-key.js";
const setThemeColor = (theme, color) => {
  var _a, _b;
  if (!inBrowser()) {
    return;
  }
  const colorList = {
    light: [],
    dark: []
  };
  if (p(color)) {
    const rgbaColor = parseColor(color);
    colorList.light = generatePalette(
      rgbaColor.r,
      rgbaColor.g,
      rgbaColor.b,
      rgbaColor.a,
      false
    ).map((color2) => {
      return rgbaColor2string(color2);
    });
    colorList.dark = generatePalette(
      rgbaColor.r,
      rgbaColor.g,
      rgbaColor.b,
      rgbaColor.a,
      true
    ).map((color2) => {
      return rgbaColor2string(color2);
    });
  } else {
    if (((_a = color.light) == null ? void 0 : _a.length) && color.light.length !== 10) {
      return throwError(
        `The length of color.light does not match the required number of CSS color palette (10).`
      );
    }
    if (((_b = color.dark) == null ? void 0 : _b.length) && color.dark.length !== 10) {
      return throwError(
        `The length of color.dark does not match the required number of CSS color palette (10).`
      );
    }
    colorList.light = color.light || [];
    colorList.dark = color.dark || [];
  }
  colorList.light.forEach((item, index) => {
    document.documentElement.style.setProperty(`--px-${theme}-light-custom-${index + 1}`, item);
  });
  colorList.dark.forEach((item, index) => {
    document.documentElement.style.setProperty(`--px-${theme}-dark-custom-${index + 1}`, item);
  });
  EventBus.emit(GLOBAL_CSS_VAR_CHANGE);
};
export {
  setThemeColor as s
};
